Task2 Task  assignment.

1) Analyze the structure of the /etc/passwd and /etc/group file, what fields are present in it, what users exist on the system? Specify several pseudo-users, how to define them?

![image](https://user-images.githubusercontent.com/58170246/133619755-8dc348c2-3128-4f62-ac64-cdeef4f38834.png)

Кожен рядок файлу описує одного користувача і містить 7 полів

username: pswd: uid: gid: uid comments: directory: shell

де

1) Реєстраційне ім'я користувача (username).

Вони повинні бути унікальними і складатися не більше ніж з 32 символів.

Імена можуть містити будь-які символи, крім двокрапки і символу нового рядка. Вони не повинні починатися з цифри.

1) Пароль (pswd)

В даному полі можлива присутність:

символу «х» - так указиватся, що пароль зберігатися в файлі / etc / shadow

символу «*» - означає, що дана обліковий запис тимчасово відключена.

набору випадкових символів і чисел - значить вказується безпосередній пароль користувача в зашифрованому вигляді.

2) Ідентифікатор користувача (uid) - це 32-бітове ціле число, яке унікально ідентифікує користувача в системі.

За замовчуванням, ідентифікатори менше 500 зарезервовані для службових облікових записів. Регулярні користувачі мають ідентифікатори, починаючи з 500.

uid - це просте числове позначення окремого користувача. Зазвичай це позитивне число не більше 65535 (іноді 32-бітове). Деякі ідентифікатори зарезервовані для спеціального використання. До них відносяться 0 (root), 1-999 (демони, псевдопользователі, системні і зарезервовані користувачі), 1000+ (звичайні користувачі).

3)What is GID? How to define it?

Ідентифікатор групи за замовчуванням (gid)

Як і ідентифікатор користувача, ідентифікатор групи (GID) є 32-бітовим цілим числом.

причому:

Ідентифікатор 0 зарезервований для групи з ім'ям root,

ідентифікатор 1 - для групи bin,

2 - для групи daemon.

5) Поле персональних даних (uid comments)

Поле в основному використовується для зберігання персональної інформації про кожного користувача. Воно не має чітко визначеного синтаксису.

Структура даного поля може бути довільною, але команда finger інтерпретує розділені комами елементи даного поля в наступному порядку:
*повне ім'я;
* Номер офісу і будівлі;
*робочий телефон;
*домашній телефон.

6) Домашній каталог (directory)

Увійшовши в систему, користувач потрапляє в свій домашній каталог. Якщо на момент реєстрації цей каталог відсутня, виводиться повідомлення про його відсутності. Якщо в якості значення поля домашнього каталогу за замовчуванням DEFAULT_HOME в файлі /etc/login.defs встановлено «no», продовження реєстрації користувача буде неможливо; в іншому випадку користувач потрапляє в кореневий каталог. За замовчуванням, домашні каталоги користувачів створюються в каталозі / home. При додаванні в систему нового користувача в його домашній каталог копіюються всі файли з каталогу / etc / skel, в якому міститися персональні конфігураційні файли командного інтерпретатора і різних програм.

7) Командний інтерпретатор (shell)

Як реєстраційної оболонки, як правило, задається інтерпретатор команд, наприклад, / bin / sh або / bin / csh, але, в принципі, це може бути будь-яка програма. За замовчуванням використовується інтерпретатор bash.

Користувачі можуть змінювати інтерпретатор за допомогою команди chsh. Файл / etc / shells містить список тих інтерпретаторів, які доступні для вибору.

Проаналізуємо структуру файлу / etc / group

cat /etc/group

![image](https://user-images.githubusercontent.com/58170246/133620706-8c5f835e-efbf-4eb7-97df-19f38e9ec0ef.png)

2)What are the uid ranges? What is UID? How to define it?

Файл / etc / group містить імена груп, присутніх в ОС Linux, і списки членів кожної групи.

Структура / etc / group

Кожен запис файлу / etc / group представляє одну групу і містить 4 поля:

group_name: password: group_id: list


1) Назва групи (group_name). За замовчуванням при створенні нового користувача створюється також його група з таким же ім'ям, як і реєстраційне ім'я користувача.
2) Зашифрований пароль (password) або символ х, який вказує на використання файлу / etc / gshadow;
3) Ідентифікатор групи (group_id)
4) Список (list) містить розділений комами список користувачів, що належать до цієї групи ..

Тут важливо: однойменний з назвою групи користувач може існувати в системі і входити в цю групу, але не бути перерахованим в цьому списку. Відомості про те, що він в неї входить можна отримати з / etc / passwd (про це сказано нижче).

Які користувачі існують в системі?

У нашій системі існують користувачі:

root - ID 0;

псевдопользователі - ID 1-999 та (або) інтерпретатор nologin

Приклади псевдопользователей:
daemon - використовується процесом системної служби;
bin - дає право власності на виконувану команду;
adm- володіє реєстраційними файлами;
nobody - використовується багатьма службами;
sshd- використовується сервером захищеної оболонки.

2) Які бувають діапазони uid? Що таке UID? Як це визначити?

Ідентифікатор користувача (uid) - це просте числове позначення окремого користувача. Зазвичай це позитивне число не більше 65535 (іноді 32-бітове). Деякі ідентифікатори зарезервовані для спеціального використання. До них відносяться 0 (root), 1-999 (демони, псевдопользователі, системні і зарезервовані користувачі), 1000+ (звичайні користувачі).

3) Що таке GID? Як це визначити?

Ідентифікатор групи за замовчуванням (gid)

Ідентифікатор групи (GID) є 32-бітовим цілим числом.

причому:
* Ідентифікатор 0 зарезервований для групи з ім'ям root,
* Ідентифікатор 1 - для групи bin,
* 2 - для групи daemon.

Групи визначаються у файлі / etc / group, а поле ідентифікатора групи в файлі / etc / passwd задає стандартний ( «ефективний») ідентифікатор на момент реєстрації користувача в системі.

Цей ідентифікатор не грає особливої ​​ролі при визначенні прав доступу; він використовується лише при створенні нових файлів і каталогів.

Нові файли зазвичай включаються в ефективну групу свого власника, але якщо у каталогу встановлено спеціальний біт setgid (02000) або файлова система змонтована з опцією grpid, нові файли належать групі власника каталогу. За замовчуванням, в ОС Linux для кожного нового користувача створюється нова група з таким же реєстраційним ім'ям і ідентифікатором.

4) Як визначити приналежність користувача до певної групи?

Подивитися на ідентифікатор користувача (uid) і інтерпретатор команд. (Описано вище)

5) Які є команди для додавання користувача в систему? Які основні параметри необхідні для створення користувача?

Щоб створити користувача в систему потрібно скористатися командою useradd.

$ Useradd опції имя_пользователя

Все досить просто, далі нам потрібно розглянути основні опції команди, за допомогою яких ви будете налаштовувати нового користувача:


-b - базовий каталог для розміщення домашнього каталогу користувача, за замовчуванням / home;

-c - коментар до облікового запису;

-d - домашній каталог, в якому будуть розміщуватися файли користувача;

-e - дата, коли обліковий запис користувача буде заблокована, в форматі РРРР-ММ-ДД;

-f - заблокувати обліковий запис відразу після створення;

-g - основна група користувача;

-G - список додаткових груп;

-k - каталог з шаблонами конфігураційних файлів;

-l - Ніколи не зберігати інформацію про входах користувача в lastlog і faillog;

-m - створювати домашній каталог користувача, якщо він не існує;

-M - не створювати домашню папку;

-N - не створювати групу з ім'ям користувача;

-o - дозволити створення користувача linux з неунікальним ідентифікатором UID;

-p - задати пароль користувача;

-r - створити системного користувача, не має оболонки входу, без домашньої директорії і з ідентифікатором до SYS_UID_MAX;

-s - командна оболонка для користувача;

-u - ідентифікатор для користувача;

-D - відобразити параметри, які використовуються за замовчуванням для створення користувача. Якщо разом з цією опцією задати ще який-небудь параметр, то його значення за замовчуванням буде перевизначити.

Для прикладу створимо користувача:

sudo adduser tempuser

Далі задаємо:

-Пароль
-Повне ім'я
-Room Number
-Work Phone
-Home phone
-Other
-Підтверджуємо інформацію

(Пункти 2-7 можна і пропустити)

![image](https://user-images.githubusercontent.com/58170246/133621678-cc31f295-5a20-4bd5-bb1b-04ea11ae7762.png)



6)How do I change the name (account name) of an existing user?


```sudo usermod -l tempuser1 tempuser```

де "tempuser1" - нове ім'я, а "tempuser" - старе

Перевіримо. Для того щоб подивитися користувачів, напишемо:

```compgen -u```

![image](https://user-images.githubusercontent.com/58170246/133622789-3e6c1110-675c-455f-9444-e19ecf9d7540.png)


7)What is skell_dir? What is its structure?

```skell_dir``` - каталог, що містить для файли копіювання до новоствореного власний uid каталог - унікальний ідентифікатор користувача.

-m - задає вихідного створення каталогу (add) або переміщення поточного файлів початкового каталогу в новий початковий mod (каталог).

-о - допускає успішне виконання команди, якщо навіть ідентифікатор користувача не унікальний.

-g - вибирає групу первинну для користувача

-G - вибирає вторинні для групи користувача.

-r - видаляє початковий каталог

8)How to remove a user from the system (including his mailbox)?

```sudo userdel -r tempuser1```

-r означає видалити домашню директорію користувача і його файли в системі.

```Rm /var/mail/ $username```

9)What commands and keys should be used to lock and unlock a user account?

Є 3 способи блокування і розблокування облікових записів користувачів в Linux.

Спосіб 1: блокування і розблокування користувачів за допомогою команди passwd

Щоб заблокувати користувача за допомогою команди passwd, можна використовувати опцію -l або -lock наступним чином:

passwd -l user_name

Щоб розблокувати користувача за допомогою команди passwd, ви можете використовувати опцію -u або -unlock:

passwd -u user_name

Спосіб 2: блокування і розблокування користувачів за допомогою команди usermod

Команда в основному використовується для зміни облікових записів користувачів в Linux.

Щоб заблокувати користувача, ви можете використовувати опцію -L наступним чином:

usermod -L user_name

Щоб розблокувати користувача, ви можете використовувати опцію -U:

usermod -U user_name

Спосіб 3: блокування і розблокування користувачів за допомогою команди chage

Команда chage використовується для зміни інформації про закінчення терміну дії пароля користувача. Його можна використовувати для автоматичного блокування неактивного користувача після певної кількості днів бездіяльності.

По суті, то, за допомогою команди chage, може бути те саме, що і з допомогою команди usermod:

chage -E 1 username

По суті, ми встановлюємо дату закінчення терміну дії, наприклад, 1970-01-02 (якусь стару)

Якщо видалити дату закінчення терміну дії, таким чином можна розблокувати користувача:

chage -E -1 username

також:

/etc/passwd - замість «х» поставити «*»

/etc/shadow - в початок пароля поставити «!»

10)How to remove a user's password and provide him with a password-free login for subsequent password change?
Як видалити пароль користувача і надати йому безпарольний логін для подальшої зміни пароля?

```Passwd –df $username```


11)Display the extended format of information about the directory, tell about the information columns displayed on the terminal.


```ls -l```

![image](https://user-images.githubusercontent.com/58170246/133623486-2d8243bc-cf4a-44ee-9f8a-6cfaea3a601b.png)


12)What access rights exist and for whom (i. e., describe the main roles)? Briefly describe the acronym for access rights.

rwx - читання, запис, виконання (соотв. 000..111, або 0..7)

777 - користувач, групи, інші


13)What is the sequence of defining the relationship between the file and the user?

14)What commands are used to change the owner of a file (directory), as well as the mode of access to the file? Give examples, demonstrate on the terminal.

```chown``` - команда використовується для зміни власника файлу або папки.

```Chown [ім'я власника] [шлях до файлу \ Директорії]```

15)What is an example of octal representation of access rights? Describe the umask command.

Umask - через побітовое НЕ, накладає маску \ забороняє установку біта.

Umask 0 - все можна змінювати

Umask 777 - заборонено

16)Give definitions of sticky bits and mechanism of identifier substitution. Give an example of files and directories with these attributes.

Sticky bit - додатковий біт використовується для директорій (в основному), захист файлів. Користувач не може видалити файли які йому не належать.

Приклад: папка / tmp

17) What file attributes should be present in the command script?

Атрибути - це набір з дев'яти основних бітів. Що визначають які з користувачів мають права на читання, запис. А також запуск файлів для виконання. Даний набір формує код, званий режимом доступу до файлу / каталогу.

Перші три біта визначають права доступу для власника.

Наступні - для групи користувачів, до якої відноситься файл.

Останні три біта - права доступу для всіх інших користувачів в системі
